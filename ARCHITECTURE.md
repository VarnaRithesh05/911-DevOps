# ğŸ—ï¸ Kubernetes Architecture - 911-DevOps

## Overview

This document explains the Kubernetes architecture with the alert-only bot mode.

## ğŸ“ Architecture Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         KUBERNETES CLUSTER                               â”‚
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                    NAMESPACE: default                           â”‚    â”‚
â”‚  â”‚                                                                 â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚    â”‚
â”‚  â”‚  â”‚           Deployment: devops-911-app                  â”‚     â”‚    â”‚
â”‚  â”‚  â”‚           Replicas: 2-5 (HPA managed)                 â”‚     â”‚    â”‚
â”‚  â”‚  â”‚                                                        â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  â”‚            Pod: devops-911-app-xxxxx          â”‚    â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  â”‚                                               â”‚    â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚    â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  Container: devops-911-server        â”‚    â”‚    â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”‚                                      â”‚    â”‚    â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  Image: varnarithesh05/911-devops   â”‚    â”‚    â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  Port: 3000                          â”‚    â”‚    â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”‚                                      â”‚    â”‚    â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  Endpoints:                          â”‚    â”‚    â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â€¢ GET /health â†’ 200 OK             â”‚    â”‚    â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â€¢ GET /kill â†’ Shutdown             â”‚    â”‚    â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â€¢ Static files (index.html)        â”‚    â”‚    â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”‚                                      â”‚    â”‚    â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  Probes:                             â”‚    â”‚    â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â€¢ Liveness: /health (30s delay)    â”‚    â”‚    â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â€¢ Readiness: /health (10s delay)   â”‚    â”‚    â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”‚                                      â”‚    â”‚    â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  Resources:                          â”‚    â”‚    â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â€¢ Request: 128Mi RAM, 100m CPU     â”‚    â”‚    â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â€¢ Limit: 256Mi RAM, 500m CPU       â”‚    â”‚    â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚    â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  â”‚                                               â”‚    â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚    â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  Container: devops-911-bot           â”‚    â”‚    â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  (ALERT-ONLY MODE)                   â”‚    â”‚    â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”‚                                      â”‚    â”‚    â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  Image: varnarithesh05/911-devops   â”‚    â”‚    â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  Command: node bot.js               â”‚    â”‚    â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”‚                                      â”‚    â”‚    â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  Environment:                        â”‚    â”‚    â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â€¢ BOT_MODE=alert-only              â”‚    â”‚    â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â€¢ ENABLE_AUTO_RESTART=false        â”‚    â”‚    â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â€¢ ENABLE_FIX_COMMAND=false         â”‚    â”‚    â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â€¢ MONITORING_INTERVAL=5000         â”‚    â”‚    â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â€¢ ALERT_COOLDOWN=60000             â”‚    â”‚    â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”‚                                      â”‚    â”‚    â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  Functions:                          â”‚    â”‚    â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  âœ… Monitor server health (5s)      â”‚    â”‚    â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  âœ… Send Slack crash alerts         â”‚    â”‚    â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  âœ… Send recovery notifications     â”‚    â”‚    â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  âœ… Alert cooldown (60s)            â”‚    â”‚    â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  âœ… Status commands                 â”‚    â”‚    â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  âŒ No auto-restart                 â”‚    â”‚    â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  âŒ No fix commands                 â”‚    â”‚    â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”‚                                      â”‚    â”‚    â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  Resources:                          â”‚    â”‚    â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â€¢ Request: 64Mi RAM, 50m CPU       â”‚    â”‚    â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â€¢ Limit: 128Mi RAM, 200m CPU       â”‚    â”‚    â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚    â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚     â”‚    â”‚
â”‚  â”‚  â”‚                                                        â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  (More replica pods...)                                â”‚     â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚    â”‚
â”‚  â”‚                                                                 â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚    â”‚
â”‚  â”‚  â”‚        Service: devops-911-service                    â”‚     â”‚    â”‚
â”‚  â”‚  â”‚        Type: LoadBalancer                             â”‚     â”‚    â”‚
â”‚  â”‚  â”‚        Port: 80 â†’ 3000                                â”‚     â”‚    â”‚
â”‚  â”‚  â”‚        Selector: app=devops-911                       â”‚     â”‚    â”‚
â”‚  â”‚  â”‚        SessionAffinity: ClientIP                      â”‚     â”‚    â”‚
â”‚  â”‚  â”‚        External IP: xxx.xxx.xxx.xxx                   â”‚     â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚    â”‚
â”‚  â”‚                                                                 â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚    â”‚
â”‚  â”‚  â”‚        HPA: devops-911-hpa                            â”‚     â”‚    â”‚
â”‚  â”‚  â”‚        Min Replicas: 2                                â”‚     â”‚    â”‚
â”‚  â”‚  â”‚        Max Replicas: 5                                â”‚     â”‚    â”‚
â”‚  â”‚  â”‚        Target CPU: 70%                                â”‚     â”‚    â”‚
â”‚  â”‚  â”‚        Target Memory: 80%                             â”‚     â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚    â”‚
â”‚  â”‚                                                                 â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚    â”‚
â”‚  â”‚  â”‚        ConfigMap: bot-config                          â”‚     â”‚    â”‚
â”‚  â”‚  â”‚        â€¢ alert-channel: C0A0U7RBBPY                   â”‚     â”‚    â”‚
â”‚  â”‚  â”‚        â€¢ container-name: devops-911-app               â”‚     â”‚    â”‚
â”‚  â”‚  â”‚        â€¢ monitoring-interval: 5000                    â”‚     â”‚    â”‚
â”‚  â”‚  â”‚        â€¢ alert-cooldown: 60000                        â”‚     â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚    â”‚
â”‚  â”‚                                                                 â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚    â”‚
â”‚  â”‚  â”‚        Secret: slack-secrets                          â”‚     â”‚    â”‚
â”‚  â”‚  â”‚        â€¢ bot-token: xoxb-***                          â”‚     â”‚    â”‚
â”‚  â”‚  â”‚        â€¢ app-token: xapp-***                          â”‚     â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â”‚ HTTPS/Webhooks
                                â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   SLACK WORKSPACE     â”‚
                    â”‚                       â”‚
                    â”‚  Channel: devops-911  â”‚
                    â”‚                       â”‚
                    â”‚  Notifications:       â”‚
                    â”‚  ğŸš¨ Crash Alerts      â”‚
                    â”‚  âœ… Recovery Notices  â”‚
                    â”‚  ğŸ“Š Status Reports    â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ Data Flow

### 1. Normal Operation
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  Every 5s   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  Health Check  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Bot   â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> â”‚  Server  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> â”‚  200   â”‚
â”‚Containerâ”‚             â”‚Container â”‚               â”‚   OK   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â–¼
  âœ… Healthy
  No alerts sent
```

### 2. Crash Detection
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  Every 5s   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Bot   â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> â”‚  Server  â”‚ âŒ Not Running
â”‚Containerâ”‚             â”‚Container â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â–¼
  ğŸš¨ Crash Detected!
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Slack Alert:  â”‚
â”‚  System Down!  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3. Kubernetes Recovery
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  Detects Crash  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    K8s   â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> â”‚  Restarts  â”‚
â”‚Controllerâ”‚                 â”‚    Pod     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  Every 5s   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Bot    â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> â”‚  Server  â”‚ âœ… Running
â”‚Container â”‚             â”‚Container â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â–¼
  âœ… Recovery!
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Slack Alert:  â”‚
â”‚  System Back!  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4. Alert Cooldown
```
Crash #1 â”€â”€> ğŸš¨ Alert Sent
   â†“ (within 60s)
Crash #2 â”€â”€> ğŸš¨ Alert Sent
   â†“ (within 60s)
Crash #3 â”€â”€> ğŸš¨ Alert Sent
   â†“ (within 60s)
Crash #4 â”€â”€> â¸ï¸ Alert Suppressed (Cooldown Active)
   â†“ (within 60s)
Crash #5 â”€â”€> â¸ï¸ Alert Suppressed (Cooldown Active)
   â†“
Recovery â”€â”€> âœ… Recovery Alert + Reset Cooldown
```

## ğŸ“Š Resource Allocation

### Per Pod
```
Server Container:
â”œâ”€â”€ CPU Request: 100m (0.1 cores)
â”œâ”€â”€ CPU Limit: 500m (0.5 cores)
â”œâ”€â”€ Memory Request: 128Mi
â””â”€â”€ Memory Limit: 256Mi

Bot Container (Alert-Only):
â”œâ”€â”€ CPU Request: 50m (0.05 cores)
â”œâ”€â”€ CPU Limit: 200m (0.2 cores)
â”œâ”€â”€ Memory Request: 64Mi
â””â”€â”€ Memory Limit: 128Mi

Total Per Pod:
â”œâ”€â”€ CPU Request: 150m
â”œâ”€â”€ CPU Limit: 700m
â”œâ”€â”€ Memory Request: 192Mi
â””â”€â”€ Memory Limit: 384Mi
```

### Cluster Capacity (2-5 replicas)

```
Minimum (2 replicas):
â”œâ”€â”€ CPU Request: 300m
â”œâ”€â”€ Memory Request: 384Mi

Maximum (5 replicas):
â”œâ”€â”€ CPU Request: 750m
â””â”€â”€ Memory Request: 960Mi
```

## ğŸ” Security Layers

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Security Boundaries            â”‚
â”‚                                        â”‚
â”‚  1. Kubernetes Network Policies        â”‚
â”‚     â”œâ”€â”€ Egress: Slack API only        â”‚
â”‚     â””â”€â”€ Ingress: LoadBalancer only    â”‚
â”‚                                        â”‚
â”‚  2. Pod Security Standards             â”‚
â”‚     â”œâ”€â”€ No privileged containers       â”‚
â”‚     â”œâ”€â”€ No host network access         â”‚
â”‚     â””â”€â”€ Read-only root filesystem      â”‚
â”‚                                        â”‚
â”‚  3. Secrets Management                 â”‚
â”‚     â”œâ”€â”€ Kubernetes Secrets (encrypted) â”‚
â”‚     â”œâ”€â”€ No hardcoded credentials       â”‚
â”‚     â””â”€â”€ RBAC for secret access         â”‚
â”‚                                        â”‚
â”‚  4. Resource Limits                    â”‚
â”‚     â”œâ”€â”€ CPU/Memory limits enforced     â”‚
â”‚     â””â”€â”€ Prevents resource exhaustion   â”‚
â”‚                                        â”‚
â”‚  5. Alert-Only Mode                    â”‚
â”‚     â”œâ”€â”€ No Docker socket access        â”‚
â”‚     â”œâ”€â”€ No container manipulation      â”‚
â”‚     â””â”€â”€ Read-only operations           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸš€ Deployment Workflow

```
1. Developer Pushes Code
   â”‚
   â–¼
2. GitHub Actions CI/CD
   â”œâ”€â”€ Lint Code
   â”œâ”€â”€ Run Tests (27 tests)
   â”œâ”€â”€ Security Audit
   â”œâ”€â”€ Build Docker Image
   â””â”€â”€ Push to Docker Hub
   â”‚
   â–¼
3. Kubernetes Deployment
   â”œâ”€â”€ Pull Latest Image
   â”œâ”€â”€ Create Secrets
   â”œâ”€â”€ Apply ConfigMaps
   â”œâ”€â”€ Deploy Pods
   â””â”€â”€ Create Service
   â”‚
   â–¼
4. Bot Starts Monitoring
   â”œâ”€â”€ Initialize Slack Connection
   â”œâ”€â”€ Load Configuration
   â”œâ”€â”€ Start Health Checks (5s interval)
   â””â”€â”€ Ready for Alerts
   â”‚
   â–¼
5. Production Running
   â”œâ”€â”€ Server Handles Traffic
   â”œâ”€â”€ Bot Monitors Health
   â”œâ”€â”€ HPA Scales as Needed
   â””â”€â”€ Alerts Sent to Slack
```

## ğŸ¯ Comparison: Local vs Kubernetes

### Local Docker Mode

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Local Development          â”‚
â”‚                                 â”‚
â”‚  Docker Container: 911-app      â”‚
â”‚  â”œâ”€â”€ Server + Bot in same      â”‚
â”‚  â”œâ”€â”€ Full mode (all features)  â”‚
â”‚  â”œâ”€â”€ Docker socket mounted     â”‚
â”‚  â””â”€â”€ Auto-restart enabled      â”‚
â”‚                                 â”‚
â”‚  Commands Available:            â”‚
â”‚  â€¢ !fix (restart container)    â”‚
â”‚  â€¢ !autofix (rebuild)          â”‚
â”‚  â€¢ !status                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Kubernetes Production

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Kubernetes Production        â”‚
â”‚                                 â”‚
â”‚  Pod: devops-911-app            â”‚
â”‚  â”œâ”€â”€ Server Container (main)   â”‚
â”‚  â”œâ”€â”€ Bot Container (sidecar)   â”‚
â”‚  â”œâ”€â”€ Alert-only mode           â”‚
â”‚  â”œâ”€â”€ No Docker socket          â”‚
â”‚  â””â”€â”€ K8s handles restart       â”‚
â”‚                                 â”‚
â”‚  Commands Available:            â”‚
â”‚  â€¢ !status                     â”‚
â”‚  â€¢ !health                     â”‚
â”‚                                 â”‚
â”‚  Kubernetes Features:           â”‚
â”‚  â€¢ Auto-restart (always)       â”‚
â”‚  â€¢ Auto-scaling (HPA)          â”‚
â”‚  â€¢ Load balancing             â”‚
â”‚  â€¢ Rolling updates            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ’¡ Key Design Decisions

### Why Alert-Only Mode?

1. **Separation of Concerns**
   - Kubernetes handles orchestration
   - Bot handles monitoring/visibility
   - Each does one thing well

2. **Security**
   - No container manipulation
   - No Docker socket access
   - Minimal permissions required

3. **Reliability**
   - Bot crash doesn't affect recovery
   - K8s policies always enforced
   - Consistent behavior across restarts

4. **Efficiency**
   - 50% less memory usage
   - 75% less CPU usage
   - Simplified codebase

### Why Sidecar Pattern?

1. **Lifecycle Management**
   - Bot and server restart together
   - Shared network namespace
   - Same pod lifecycle

2. **Resource Efficiency**
   - Shared storage/network
   - Single pod overhead
   - Better resource utilization

3. **Simplicity**
   - Easy to deploy
   - No service discovery needed
   - Localhost communication

## ğŸ“ˆ Monitoring Dashboard (Conceptual)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    DevOps-911 Dashboard                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  Pod Status:          âœ… 3/3 Running                        â”‚
â”‚  HPA Status:          âœ… Active (3 replicas)                â”‚
â”‚  Service:             âœ… LoadBalancer Ready                 â”‚
â”‚  Bot Mode:            alert-only                            â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  Health Checks (Last Hour)                         â”‚    â”‚
â”‚  â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  720/720 â”‚    â”‚
â”‚  â”‚  Success Rate: 100%                                â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  Alerts Sent (Last 24h)                            â”‚    â”‚
â”‚  â”‚  Crash Alerts: 2                                   â”‚    â”‚
â”‚  â”‚  Recovery Alerts: 2                                â”‚    â”‚
â”‚  â”‚  Cooldown Events: 0                                â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  Resource Usage                                    â”‚    â”‚
â”‚  â”‚  CPU:    â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘  40%                          â”‚    â”‚
â”‚  â”‚  Memory: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘  60%                          â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                              â”‚
â”‚  Recent Events:                                             â”‚
â”‚  â€¢ 10:30 AM - Pod scaled to 3 replicas (HPA)              â”‚
â”‚  â€¢ 10:15 AM - Recovery alert sent to Slack                â”‚
â”‚  â€¢ 10:14 AM - Crash detected, alert sent                  â”‚
â”‚  â€¢ 09:00 AM - Deployment updated to v1.2.0                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“ Summary

The Kubernetes architecture provides:

âœ… **High Availability:** Multiple replicas with auto-restart  
âœ… **Auto-Scaling:** HPA based on CPU/Memory  
âœ… **Observability:** Alert-only bot with Slack notifications  
âœ… **Security:** Minimal permissions, no write operations  
âœ… **Efficiency:** Optimized resource usage  
âœ… **Simplicity:** Easy to deploy and maintain  

Perfect for production deployments! ğŸš€
